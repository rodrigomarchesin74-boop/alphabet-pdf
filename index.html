<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALPHAbet - Gerador de Documentos</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; background: white; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; }
        header h1 { font-size: 2em; margin-bottom: 10px; }
        .content { padding: 30px; }
        .section { margin-bottom: 30px; padding: 20px; background: #f8f9fa; border-left: 4px solid #667eea; border-radius: 5px; }
        .section h2 { color: #667eea; margin-bottom: 15px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input[type="text"], input[type="date"] { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-family: Arial; font-size: 1em; }
        input[type="checkbox"] { margin-right: 8px; cursor: pointer; }
        .checkbox-group { display: flex; align-items: center; margin-bottom: 10px; }
        .checkbox-group label { margin-bottom: 0; cursor: pointer; }
        .button-group { display: flex; gap: 10px; margin-top: 20px; flex-wrap: wrap; }
        button { padding: 12px 25px; border: none; border-radius: 5px; font-size: 1em; font-weight: bold; cursor: pointer; transition: all 0.3s; }
        .btn-primary { background: #667eea; color: white; }
        .btn-primary:hover { background: #5568d3; }
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #5a6268; }
        .message { padding: 15px; border-radius: 5px; margin-bottom: 20px; display: none; }
        .message.show { display: block; }
        .message.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .message.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .tabs { display: flex; border-bottom: 2px solid #ddd; margin-bottom: 20px; }
        .tab-button { padding: 10px 20px; background: none; border: none; cursor: pointer; font-size: 1em; border-bottom: 3px solid transparent; }
        .tab-button.active { color: #667eea; border-bottom-color: #667eea; font-weight: bold; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö ALPHAbet</h1>
            <p>Gerador de Documentos de Estudo - AD/DP UNIP</p>
        </header>
        <div class="content">
            <div id="message" class="message"></div>
            <div class="tabs">
                <button class="tab-button active" onclick="switchTab(event, 'form')">Formul√°rio</button>
                <button class="tab-button" onclick="switchTab(event, 'datas')">Configurar Datas</button>
            </div>
            
            <div id="form" class="tab-content active">
                <div class="section">
                    <h2>üìã Dados do Aluno</h2>
                    <div class="form-group">
                        <label for="student_name">Nome do Aluno *</label>
                        <input type="text" id="student_name" placeholder="Digite o nome completo">
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="regime_grade">
                        <label for="regime_grade">Participa do regime de grade?</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="has_subsequent_semester">
                        <label for="has_subsequent_semester">Possui disciplinas em semestre(s) subsequente(s)?</label>
                    </div>
                </div>
                
                <div class="section">
                    <h2>üìö Disciplinas</h2>
                    <div class="checkbox-group">
                        <input type="checkbox" id="task_AC">
                        <label for="task_AC">Atividades Complementares (AC)</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="task_EXT">
                        <label for="task_EXT">Atividades de Extens√£o (EXT)</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="task_AVA">
                        <label for="task_AVA">Disciplina(s) AVA</label>
                    </div>
                    <div class="form-group" style="margin-left: 30px;">
                        <input type="text" id="AVA_disciplines" placeholder="Ex: Matem√°tica, Portugu√™s">
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="task_ONLINE">
                        <label for="task_ONLINE">Disciplina(s) On-line</label>
                    </div>
                    <div class="form-group" style="margin-left: 30px;">
                        <input type="text" id="ONLINE_disciplines" placeholder="Ex: Hist√≥ria, Geografia">
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="task_ONLINE_ESPECIAL">
                        <label for="task_ONLINE_ESPECIAL">Disciplina(s) On-line - Casos Especiais</label>
                    </div>
                    <div class="form-group" style="margin-left: 30px;">
                        <input type="text" id="ONLINE_ESPECIAL_disciplines" placeholder="Ex: Biologia">
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="task_OPTATIVA">
                        <label for="task_OPTATIVA">Disciplina Optativa</label>
                    </div>
                    <div class="form-group" style="margin-left: 30px;">
                        <input type="text" id="OPTATIVA_disciplines" placeholder="Ex: Educa√ß√£o F√≠sica">
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="task_ED">
                        <label for="task_ED">Estudos Disciplinares (ED)</label>
                    </div>
                    <div class="form-group" style="margin-left: 30px;">
                        <input type="text" id="ED_disciplines" placeholder="Ex: M√≥dulo 1, M√≥dulo 2">
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="task_PIM">
                        <label for="task_PIM">Projeto Integrado Multidisciplinar (PIM)</label>
                    </div>
                    <div class="form-group" style="margin-left: 30px;">
                        <input type="text" id="PIM_disciplines" placeholder="Ex: PIM I">
                    </div>
                </div>
                
                <div class="button-group">
                    <button class="btn-primary" onclick="generatePDF()">üìÑ Gerar PDF</button>
                    <button class="btn-secondary" onclick="resetForm()">üîÑ Limpar</button>
                </div>
            </div>
            
            <div id="datas" class="tab-content">
                <div class="section">
                    <h2>üìÖ Configurar Datas</h2>
                    <div class="grid">
                        <div class="form-group"><label for="NP1_inicio">NP1 - In√≠cio</label><input type="date" id="NP1_inicio"></div>
                        <div class="form-group"><label for="NP1_fim">NP1 - Fim</label><input type="date" id="NP1_fim"></div>
                        <div class="form-group"><label for="NP2_inicio">NP2 - In√≠cio</label><input type="date" id="NP2_inicio"></div>
                        <div class="form-group"><label for="NP2_fim">NP2 - Fim</label><input type="date" id="NP2_fim"></div>
                        <div class="form-group"><label for="SUB_inicio">SUB - In√≠cio</label><input type="date" id="SUB_inicio"></div>
                        <div class="form-group"><label for="SUB_fim">SUB - Fim</label><input type="date" id="SUB_fim"></div>
                        <div class="form-group"><label for="EXAME_inicio">EXAME - In√≠cio</label><input type="date" id="EXAME_inicio"></div>
                        <div class="form-group"><label for="EXAME_fim">EXAME - Fim</label><input type="date" id="EXAME_fim"></div>
                        <div class="form-group"><label for="PIM_prazo">Prazo PIM</label><input type="date" id="PIM_prazo"></div>
                        <div class="form-group"><label for="GERAL_prazo">Prazo Geral</label><input type="date" id="GERAL_prazo"></div>
                    </div>
                    <div class="form-group">
                        <label for="atendimento_info">Info de Atendimento</label>
                        <input type="text" id="atendimento_info" placeholder="Ex: quintas-feiras, das 18h30 √†s 21h00">
                    </div>
                    <div class="button-group">
                        <button class="btn-primary" onclick="saveDates()">üíæ Salvar</button>
                        <button class="btn-secondary" onclick="resetDates()">üîÑ Padr√£o</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const DEFAULT_DATES = {
            NP1_inicio: "2025-09-15", NP1_fim: "2025-09-27",
            NP2_inicio: "2025-11-03", NP2_fim: "2025-11-14",
            SUB_inicio: "2025-11-17", SUB_fim: "2025-11-25",
            EXAME_inicio: "2025-12-04", EXAME_fim: "2025-12-12",
            PIM_prazo: "2025-10-30", GERAL_prazo: "2025-10-20",
            atendimento_info: "quintas-feiras, das 18h30 √†s 21h00"
        };
        
        window.addEventListener('load', loadDates);
        
        function switchTab(e, tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(el => el.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            e.target.classList.add('active');
        }
        
        function loadDates() {
            const saved = localStorage.getItem('alphabetDates');
            const dates = saved ? JSON.parse(saved) : DEFAULT_DATES;
            Object.keys(dates).forEach(key => {
                const elem = document.getElementById(key);
                if (elem) elem.value = dates[key];
            });
        }
        
        function saveDates() {
            const dates = {};
            Object.keys(DEFAULT_DATES).forEach(key => {
                const elem = document.getElementById(key);
                if (elem) dates[key] = elem.value;
            });
            localStorage.setItem('alphabetDates', JSON.stringify(dates));
            showMessage('‚úÖ Configura√ß√£o salva!', 'success');
        }
        
        function resetDates() {
            if (confirm('Restaurar configura√ß√µes padr√£o?')) {
                Object.keys(DEFAULT_DATES).forEach(key => {
                    const elem = document.getElementById(key);
                    if (elem) elem.value = DEFAULT_DATES[key];
                });
                localStorage.removeItem('alphabetDates');
                showMessage('‚úÖ Padr√µes restaurados!', 'success');
            }
        }
        
        function formatDate(dateStr) {
            if (!dateStr) return '';
            const date = new Date(dateStr + 'T00:00:00');
            return date.toLocaleDateString('pt-BR');
        }
        
        function resetForm() {
            document.getElementById('student_name').value = '';
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            document.querySelectorAll('input[id*="_disciplines"]').forEach(inp => inp.value = '');
        }
        
        function showMessage(text, type) {
            const msg = document.getElementById('message');
            msg.textContent = text;
            msg.className = `message ${type} show`;
            setTimeout(() => msg.classList.remove('show'), 5000);
        }
        
        function generatePDF() {
            const studentName = document.getElementById('student_name').value.trim();
            if (!studentName) {
                showMessage('Por favor, insira o nome do aluno!', 'error');
                return;
            }
            
            const selectedTasks = [];
            document.querySelectorAll('input[id^="task_"]:checked').forEach(cb => {
                selectedTasks.push(cb.id.replace('task_', ''));
            });
            
            if (selectedTasks.length === 0) {
                showMessage('Selecione pelo menos uma tarefa!', 'error');
                return;
            }
            
            try {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF('p', 'mm', 'a4');
                const pageWidth = doc.internal.pageSize.getWidth();
                const pageHeight = doc.internal.pageSize.getHeight();
                const margin = 15;
                const maxWidth = pageWidth - (margin * 2);
                let yPos = 20;
                let pageNum = 1;
                
                const dates = JSON.parse(localStorage.getItem('alphabetDates')) || DEFAULT_DATES;
                const regimeGrade = document.getElementById('regime_grade').checked;
                const hasSubsequent = document.getElementById('has_subsequent_semester').checked;
                
                // Cabecalho
                doc.setFontSize(16);
                doc.setFont(undefined, 'bold');
                doc.text("Regime de Adaptacao/Dependencia (AD/DP)", pageWidth / 2, yPos, { align: 'center' });
                yPos += 8;
                
                doc.setFontSize(14);
                doc.text("Programa de Estudo", pageWidth / 2, yPos, { align: 'center' });
                yPos += 12;
                
                doc.setFontSize(11);
                doc.setFont(undefined, 'normal');
                doc.text("Aluno/RA/Curso/Grade:", margin, yPos);
                doc.setFont(undefined, 'bold');
                doc.text(studentName, margin + 50, yPos);
                yPos += 8;
                
                doc.setFont(undefined, 'normal');
                doc.text("Participa do regime de grade? " + (regimeGrade ? "Sim" : "Nao"), margin, yPos);
                yPos += 6;
                
                doc.text("Possui disciplinas em semestre(s) subsequente(s)? " + (hasSubsequent ? "Sim" : "Nao"), margin, yPos);
                yPos += 12;
                
                // Nota se tiver semestre subsequente
                if (hasSubsequent) {
                    doc.setFont(undefined, 'italic');
                    doc.setFontSize(10);
                    const noteText = "ATENCAO!! Em conformidade as Diretrizes Curriculares da UNIP, voce tera disciplinas em AD/DP para cumprir neste e no(s) proximo(s) semestre(s). As indicacoes a seguir correspondem ao conteudo a ser integralizado NESTE SEMESTRE. Para o(s) proximo(s), voce devera entrar em contato com a Coordenacao, para receber novas instrucoes.";
                    const lines = doc.splitTextToSize(noteText, maxWidth);
                    lines.forEach(line => {
                        if (yPos > pageHeight - 30) {
                            doc.addPage();
                            yPos = 15;
                            pageNum++;
                        }
                        doc.text(line, margin, yPos);
                        yPos += 4;
                    });
                    yPos += 4;
                    doc.setFont(undefined, 'normal');
                    doc.setFontSize(11);
                }
                
                yPos += 5;
                
                // Tarefas
                selectedTasks.forEach(task => {
                    if (yPos > pageHeight - 30) {
                        doc.addPage();
                        yPos = 15;
                        pageNum++;
                    }
                    
                    doc.setFontSize(12);
                    doc.setFont(undefined, 'bold');
                    doc.setTextColor(102, 126, 234);
                    
                    const taskNames = {
                        'AC': 'Atividades Complementares (AC)',
                        'EXT': 'Atividades de Extensao (EXT)',
                        'AVA': 'Disciplina(s) AVA',
                        'ONLINE': 'Disciplina(s) On-line',
                        'ONLINE_ESPECIAL': 'Disciplina(s) On-line - Casos Especiais',
                        'OPTATIVA': 'Disciplina Optativa',
                        'ED': 'Estudos Disciplinares (ED)',
                        'PIM': 'Projeto Integrado Multidisciplinar (PIM)'
                    };
                    
                    doc.text(taskNames[task] || task, margin, yPos);
                    yPos += 6;
                    
                    doc.setTextColor(0, 0, 0);
                    doc.setFont(undefined, 'normal');
                    doc.setFontSize(10);
                    
                    let details = [];
                    
                    if (task === 'AC') {
                        details = [
                            'Carga horaria exigida: 100 horas.',
                            'A entrega das AC e feita on-line, exclusivamente via Area do Aluno/AC.'
                        ];
                    } else if (task === 'EXT') {
                        details = [
                            'Carga horaria exigida: 210 horas.',
                            'A entrega das Atividades de Extensao e feita on-line, exclusivamente via Area do Aluno/EXT.'
                        ];
                    } else if (task === 'AVA') {
                        const disciplines = document.getElementById('AVA_disciplines').value;
                        if (disciplines) details.push('Disciplina(s): ' + disciplines + '.');
                        details.push('Acessar Area do Aluno/AVA/Conteudos Academicos/Minhas Disciplinas.');
                        details.push('Para NP1, responder, salvar e ENVIAR TODOS os questionarios de TODAS as unidades.');
                        if (regimeGrade) {
                            details.push('Para NP2, SUB e EXAME, agendar as provas de cada disciplina no sistema e realiza-las PRESENCIALMENTE no Laboratorio de Informatica.');
                            details.push('O aluno devera realizar o EXAME apenas se a Media Semestral (MS) for inferior a 7,0 (sete).');
                            details.push('NP1: de ' + formatDate(dates.NP1_inicio) + ' a ' + formatDate(dates.NP1_fim) + '.');
                            details.push('NP2: de ' + formatDate(dates.NP2_inicio) + ' a ' + formatDate(dates.NP2_fim) + '.');
                            details.push('SUB: de ' + formatDate(dates.SUB_inicio) + ' a ' + formatDate(dates.SUB_fim) + '.');
                            details.push('EXAME: de ' + formatDate(dates.EXAME_inicio) + ' a ' + formatDate(dates.EXAME_fim) + '.');
                        } else {
                            details.push('A nota dos exercicios realizados sera replicada para NP1 e NP2.');
                            details.push('Para fins de aprovacao, o aluno deve alcanzar uma media (nota) igual ou superior a 5,0 (cinco).');
                        }
                    } else if (task === 'ONLINE') {
                        const disciplines = document.getElementById('ONLINE_disciplines').value;
                        if (disciplines) details.push('Disciplina(s): ' + disciplines + '.');
                        if (regimeGrade) {
                            details.push('Atencao a plataforma de ACESSO para responder estas disciplinas, que e DIFERENTE das disciplinas AVA.');
                            details.push('Acessar Area do Aluno/Disciplinas On-line.');
                            details.push('Responder TODOS OS MODULOS DE QUESTOES.');
                            details.push('NP1: de ' + formatDate(dates.NP1_inicio) + ' a ' + formatDate(dates.NP1_fim) + '.');
                            details.push('NP2: de ' + formatDate(dates.NP2_inicio) + ' a ' + formatDate(dates.NP2_fim) + '.');
                        } else {
                            details.push('Atencao a plataforma de ACESSO para responder estas disciplinas.');
                            details.push('Acessar Area do Aluno/Disciplinas On-line.');
                            details.push('Responder TODOS OS MODULOS DE QUESTOES.');
                        }
                    } else if (task === 'ONLINE_ESPECIAL') {
                        const disciplines = document.getElementById('ONLINE_ESPECIAL_disciplines').value;
                        if (disciplines) details.push('Disciplina(s): ' + disciplines + '.');
                        details.push('Acessar Area do Aluno/AVA/Conteudos Academicos/Minhas Disciplinas.');
                        details.push('Responder, salvar e ENVIAR TODOS os questionarios de TODAS as unidades.');
                        details.push('A nota dos exercicios realizados sera replicada para NP1 e NP2.');
                    } else if (task === 'OPTATIVA') {
                        const disciplines = document.getElementById('OPTATIVA_disciplines').value;
                        if (disciplines) details.push('Disciplina(s): ' + disciplines + '.');
                        details.push('Acessar Area do Aluno/AVA/Conteudos Academicos/Minhas Disciplinas.');
                        details.push('Para NP1, responder, salvar e ENVIAR TODOS os questionarios de TODAS as unidades.');
                    } else if (task === 'ED') {
                        const disciplines = document.getElementById('ED_disciplines').value;
                        if (disciplines) details.push('Disciplina(s): ' + disciplines + '.');
                        details.push('Responder TODAS as questoes (35) de cada modulo que estiver em AD/DP.');
                        details.push('Acertar, para fins de aprovacao, pelo menos 10 questoes para cada modulo que estiver em AD/DP.');
                    } else if (task === 'PIM') {
                        const disciplines = document.getElementById('PIM_disciplines').value;
                        if (disciplines) details.push('Disciplina(s): ' + disciplines + '.');
                        details.push('Elaborar o trabalho, conforme o Manual anexo.');
                        details.push('O trabalho deve ser DIGITADO conforme as normas da ABNT.');
                        details.push('Apos o termino da redacao, CONVERTER o(s) arquivo(s) para o formato PDF.');
                        details.push('Enviar o conteudo elaborado para: rodrigo.oliveira@docente.unip.br');
                        if (regimeGrade) {
                            details.push('Prazo: ' + formatDate(dates.PIM_prazo) + '.');
                        }
                    }
                    
                    details.forEach(detail => {
                        if (detail.trim()) {
                            const lines = doc.splitTextToSize('* ' + detail.trim(), maxWidth - 5);
                            lines.forEach(line => {
                                if (yPos > pageHeight - 15) {
                                    doc.addPage();
                                    yPos = 15;
                                    pageNum++;
                                }
                                doc.text(line, margin + 5, yPos);
                                yPos += 4;
                            });
                        }
                    });
                    yPos += 5;
                });
                
                // Rodape com atendimento
                if (yPos > pageHeight - 20) {
                    doc.addPage();
                    yPos = 15;
                }
                
                yPos += 5;
                doc.setFont(undefined, 'bold');
                doc.setFontSize(10);
                const attendText = 'Em caso de duvidas, comparecer no ATENDIMENTO DA COORDENACAO, ' + dates.atendimento_info + '.';
                const attendLines = doc.splitTextToSize(attendText, maxWidth);
                attendLines.forEach(line => {
                    if (yPos > pageHeight - 15) {
                        doc.addPage();
                        yPos = 15;
                    }
                    doc.text(line, margin, yPos);
                    yPos += 5;
                });
                
                const cleanName = studentName.normalize('NFD').replace(/[\u0300-\u036f]/g, '').replace(/[^a-zA-Z0-9]/g, '_');
                doc.save('DP_' + cleanName + '.pdf');
                showMessage('‚úÖ PDF gerado com sucesso!', 'success');
            } catch (error) {
                showMessage('‚ùå Erro: ' + error.message, 'error');
                console.error(error);
            }
        }
    </script>
</body>
</html>
