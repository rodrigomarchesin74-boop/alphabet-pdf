<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALPHAbet - Gerador de Documentos</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; background: white; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; }
        header h1 { font-size: 2em; margin-bottom: 10px; }
        .content { padding: 30px; }
        .section { margin-bottom: 30px; padding: 20px; background: #f8f9fa; border-left: 4px solid #667eea; border-radius: 5px; }
        .section h2 { color: #667eea; margin-bottom: 15px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; color: #333; }
        input[type="text"], input[type="date"] { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-family: Arial; font-size: 1em; }
        input[type="checkbox"] { margin-right: 8px; cursor: pointer; }
        .checkbox-group { display: flex; align-items: center; margin-bottom: 10px; }
        .checkbox-group label { margin-bottom: 0; cursor: pointer; color: #333; }
        .button-group { display: flex; gap: 10px; margin-top: 20px; flex-wrap: wrap; }
        button { padding: 12px 25px; border: none; border-radius: 5px; font-size: 1em; cursor: pointer; transition: all 0.3s; }
        .btn-primary { background: #667eea; color: white; }
        .btn-primary:hover { background: #5568d3; }
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #5a6268; }
        .message { padding: 15px; border-radius: 5px; margin-bottom: 20px; display: none; }
        .message.show { display: block; }
        .message.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .message.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .tabs { display: flex; border-bottom: 2px solid #ddd; margin-bottom: 20px; }
        .tab-button { padding: 10px 20px; background: none; border: none; cursor: pointer; font-size: 1em; border-bottom: 3px solid transparent; }
        .tab-button.active { color: #667eea; border-bottom-color: #667eea; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; }
        .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .disciplines-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-left: 0; margin-top: 0; margin-bottom: 15px; }
        .discipline-item { display: flex; align-items: center; }
        .discipline-item input[type="checkbox"] { margin-right: 8px; }
        .discipline-item label { margin-bottom: 0; cursor: pointer; display: flex; align-items: center; color: #333; }
        .discipline-header { font-size: 0.95em; color: #333; margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö ALPHAbet</h1>
            <p>Gerador de Documentos de Estudo - AD/DP UNIP</p>
        </header>
        <div class="content">
            <div id="message" class="message"></div>
            <div class="tabs">
                <button class="tab-button active" onclick="switchTab(event, 'form')">Formul√°rio</button>
                <button class="tab-button" onclick="switchTab(event, 'datas')">Configurar Datas</button>
            </div>
            
            <div id="form" class="tab-content active">
                <div class="section">
                    <h2>üìã Dados do Aluno</h2>
                    <div class="form-group">
                        <label for="student_name">Nome do Aluno *</label>
                        <input type="text" id="student_name" placeholder="Digite o nome completo">
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="regime_grade">
                        <label for="regime_grade">Aluno participante do regime de grade</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="has_subsequent_semester">
                        <label for="has_subsequent_semester">Possui disciplinas em semestres subsequentes</label>
                    </div>
                </div>
                
                <div class="section">
                    <h2>üìö Disciplinas</h2>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="task_AC">
                        <label for="task_AC">Atividades Complementares (AC)</label>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="task_EXT">
                        <label for="task_EXT">Atividades de Extens√£o (AEX)</label>
                    </div>
                    
                    <div>
                        <div class="discipline-header">Disciplina(s) AVA</div>
                        <div class="disciplines-grid" id="ava-disciplines-grid"></div>
                    </div>
                    
                    <div>
                        <div class="discipline-header">Disciplina(s) On-line</div>
                        <div class="disciplines-grid" id="online-disciplines-grid"></div>
                    </div>
                    
                    <div>
                        <div class="discipline-header">Disciplina(s) On-line - Casos Especiais</div>
                        <div class="disciplines-grid" id="online-especial-disciplines-grid"></div>
                    </div>
                    
                    <div>
                        <div class="discipline-header">Disciplina Optativa</div>
                        <div class="disciplines-grid" id="optativa-disciplines-grid"></div>
                    </div>
                    
                    <div>
                        <div class="discipline-header">Estudos Disciplinares (ED)</div>
                        <div class="disciplines-grid" id="ed-disciplines-grid"></div>
                    </div>
                    
                    <div>
                        <div class="discipline-header">Projeto Integrado Multidisciplinar (PIM)</div>
                        <div class="disciplines-grid" id="pim-disciplines-grid"></div>
                    </div>
                </div>
                
                <div class="button-group">
                    <button class="btn-primary" onclick="generatePDF()">üìÑ Gerar PDF</button>
                    <button class="btn-secondary" onclick="resetForm()">üîÑ Limpar</button>
                </div>
            </div>
            
            <div id="datas" class="tab-content">
                <div class="section">
                    <h2>üìÖ Configurar Datas</h2>
                    <div class="grid-4">
                        <div class="form-group"><label for="NP1_inicio">NP1 - In√≠cio</label><input type="date" id="NP1_inicio"></div>
                        <div class="form-group"><label for="NP1_fim">NP1 - Fim</label><input type="date" id="NP1_fim"></div>
                        <div class="form-group"><label for="PIM_prazo">Prazo PIM</label><input type="date" id="PIM_prazo"></div>
                        <div class="form-group"><label for="GERAL_prazo">Prazo Geral</label><input type="date" id="GERAL_prazo"></div>
                        
                        <div class="form-group"><label for="NP2_inicio">NP2 - In√≠cio</label><input type="date" id="NP2_inicio"></div>
                        <div class="form-group"><label for="NP2_fim">NP2 - Fim</label><input type="date" id="NP2_fim"></div>
                        <div class="form-group"><label for="atendimento_info" style="grid-column: span 2;">Info de Atendimento</label></div>
                        
                        <div class="form-group"><label for="SUB_inicio">SUB - In√≠cio</label><input type="date" id="SUB_inicio"></div>
                        <div class="form-group"><label for="SUB_fim">SUB - Fim</label><input type="date" id="SUB_fim"></div>
                        <div class="form-group" style="grid-column: span 2;"><input type="text" id="atendimento_info" placeholder="Ex: quintas-feiras, das 18h30 √†s 21h00"></div>
                        
                        <div class="form-group"><label for="EXAME_inicio">EXAME - In√≠cio</label><input type="date" id="EXAME_inicio"></div>
                        <div class="form-group"><label for="EXAME_fim">EXAME - Fim</label><input type="date" id="EXAME_fim"></div>
                    </div>
                    <div class="button-group">
                        <button class="btn-primary" onclick="saveDates()">üíæ Salvar</button>
                        <button class="btn-secondary" onclick="resetDates()">üîÑ Padr√£o</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const DEFAULT_DATES = {
            NP1_inicio: "2025-09-15", NP1_fim: "2025-09-27",
            NP2_inicio: "2025-11-03", NP2_fim: "2025-11-14",
            SUB_inicio: "2025-11-17", SUB_fim: "2025-11-25",
            EXAME_inicio: "2025-12-04", EXAME_fim: "2025-12-12",
            PIM_prazo: "2025-10-30", GERAL_prazo: "2025-10-20",
            atendimento_info: "quintas-feiras, das 18h30 √†s 21h00"
        };
        
        function createDisciplinesGrid(taskId, gridId) {
            const grid = document.getElementById(gridId);
            grid.innerHTML = '';
            for (let i = 1; i <= 10; i++) {
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = taskId + '_disc_' + i;
                checkbox.className = 'discipline-checkbox';
                checkbox.addEventListener('change', () => updateTaskVisibility(taskId));
                
                const label = document.createElement('label');
                label.htmlFor = taskId + '_disc_' + i;
                label.textContent = 'Disciplina ' + i;
                
                const item = document.createElement('div');
                item.className = 'discipline-item';
                item.appendChild(checkbox);
                item.appendChild(label);
                
                grid.appendChild(item);
            }
        }
        
        function updateTaskVisibility(taskId) {
            const hasSelected = document.querySelector('input[id^="' + taskId + '_disc_"]:checked');
            const taskCheckbox = document.getElementById('task_' + taskId);
            if (taskCheckbox) {
                taskCheckbox.checked = hasSelected ? true : false;
            }
        }
        
        window.addEventListener('load', function() {
            loadDates();
            createDisciplinesGrid('AVA', 'ava-disciplines-grid');
            createDisciplinesGrid('ONLINE', 'online-disciplines-grid');
            createDisciplinesGrid('ONLINE_ESPECIAL', 'online-especial-disciplines-grid');
            createDisciplinesGrid('OPTATIVA', 'optativa-disciplines-grid');
            createDisciplinesGrid('ED', 'ed-disciplines-grid');
            createDisciplinesGrid('PIM', 'pim-disciplines-grid');
        });
        
        function switchTab(e, tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(el => el.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            e.target.classList.add('active');
        }
        
        function loadDates() {
            const saved = localStorage.getItem('alphabetDates');
            const dates = saved ? JSON.parse(saved) : DEFAULT_DATES;
            Object.keys(dates).forEach(key => {
                const elem = document.getElementById(key);
                if (elem) elem.value = dates[key];
            });
        }
        
        function saveDates() {
            const dates = {};
            Object.keys(DEFAULT_DATES).forEach(key => {
                const elem = document.getElementById(key);
                if (elem) dates[key] = elem.value;
            });
            localStorage.setItem('alphabetDates', JSON.stringify(dates));
            showMessage('‚úÖ Configura√ß√£o salva!', 'success');
        }
        
        function resetDates() {
            if (confirm('Restaurar configura√ß√µes padr√£o?')) {
                Object.keys(DEFAULT_DATES).forEach(key => {
                    const elem = document.getElementById(key);
                    if (elem) elem.value = DEFAULT_DATES[key];
                });
                localStorage.removeItem('alphabetDates');
                showMessage('‚úÖ Padr√µes restaurados!', 'success');
            }
        }
        
        function formatDate(dateStr) {
            if (!dateStr) return '';
            const date = new Date(dateStr + 'T00:00:00');
            return date.toLocaleDateString('pt-BR');
        }
        
        function resetForm() {
            document.getElementById('student_name').value = '';
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
        }
        
        function showMessage(text, type) {
            const msg = document.getElementById('message');
            msg.textContent = text;
            msg.className = `message ${type} show`;
            setTimeout(() => msg.classList.remove('show'), 5000);
        }
        
        function getSelectedDisciplines(taskId) {
            const disciplines = [];
            document.querySelectorAll('input[id^="' + taskId + '_disc_"]:checked').forEach(cb => {
                const num = cb.id.split('_')[2];
                disciplines.push('Disciplina ' + num);
            });
            return disciplines;
        }
        
        function generatePDF() {
            const studentName = document.getElementById('student_name').value.trim();
            if (!studentName) {
                showMessage('Por favor, insira o nome do aluno!', 'error');
                return;
            }
            
            const selectedTasks = [];
            if (document.getElementById('task_AC').checked) selectedTasks.push('AC');
            if (document.getElementById('task_EXT').checked) selectedTasks.push('EXT');
            if (getSelectedDisciplines('AVA').length > 0) selectedTasks.push('AVA');
            if (getSelectedDisciplines('ONLINE').length > 0) selectedTasks.push('ONLINE');
            if (getSelectedDisciplines('ONLINE_ESPECIAL').length > 0) selectedTasks.push('ONLINE_ESPECIAL');
            if (getSelectedDisciplines('OPTATIVA').length > 0) selectedTasks.push('OPTATIVA');
            if (getSelectedDisciplines('ED').length > 0) selectedTasks.push('ED');
            if (getSelectedDisciplines('PIM').length > 0) selectedTasks.push('PIM');
            
            if (selectedTasks.length === 0) {
                showMessage('Selecione pelo menos uma tarefa ou disciplina!', 'error');
                return;
            }
            
            try {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF('p', 'mm', 'a4');
                const pageWidth = doc.internal.pageSize.getWidth();
                const pageHeight = doc.internal.pageSize.getHeight();
                const margin = 15;
                let yPos = 15;
                let pageNum = 1;
                const lineHeight = 5.25;
                
                const dates = JSON.parse(localStorage.getItem('alphabetDates')) || DEFAULT_DATES;
                const regimeGrade = document.getElementById('regime_grade').checked;
                const hasSubsequent = document.getElementById('has_subsequent_semester').checked;
                
                doc.setFont('Helvetica', 'bold');
                doc.setFontSize(12);
                doc.text('Regime de Adaptacao/Dependencia (AD/DP)', pageWidth / 2, yPos, { align: 'center' });
                yPos += lineHeight;
                doc.text('Programa de Estudo', pageWidth / 2, yPos, { align: 'center' });
                yPos += lineHeight * 1.5;
                
                doc.setFont('Helvetica', 'normal');
                doc.setFontSize(11);
                doc.text('Aluno/RA/Curso/Grade: ' + studentName, margin, yPos);
                yPos += lineHeight;
                doc.text('Aluno participante do regime de grade? ' + (regimeGrade ? 'Sim' : 'Nao'), margin, yPos);
                yPos += lineHeight;
                doc.text('Possui disciplinas em semestres subsequentes? ' + (hasSubsequent ? 'Sim' : 'Nao'), margin, yPos);
                yPos += lineHeight * 1.5;
                
                if (hasSubsequent) {
                    doc.setFont('Helvetica', 'italic');
                    doc.setFontSize(10);
                    const noteText = 'ATENCAO!! Em conformidade as Diretrizes Curriculares da UNIP, voce tera disciplinas em AD/DP para cumprir neste e no(s) proximo(s) semestre(s). As indicacoes a seguir correspondem ao conteudo a ser integralizado NESTE SEMESTRE. Para o(s) proximo(s), voce devera entrar em contato com a Coordenacao, para receber novas instrucoes.';
                    const lines = doc.splitTextToSize(noteText, pageWidth - 30);
                    lines.forEach(line => {
                        if (yPos > pageHeight - 30) {
                            doc.addPage();
                            doc.setFont('Helvetica', 'italic');
                            doc.setFontSize(10);
                            yPos = 15;
                            pageNum++;
                            doc.text('Pagina ' + pageNum, pageWidth - 30, pageHeight - 10);
                        }
                        doc.text(line, margin, yPos);
                        yPos += lineHeight;
                    });
                    yPos += lineHeight;
                }
                
                selectedTasks.forEach(task => {
                    if (yPos > pageHeight - 30) {
                        doc.addPage();
                        yPos = 15;
                        pageNum++;
                        doc.text('Pagina ' + pageNum, pageWidth - 30, pageHeight - 10);
                    }
                    
                    const taskNames = {
                        'AC': 'Atividades Complementares (AC)',
                        'EXT': 'Atividades de Extensao (AEX)',
                        'AVA': 'Disciplina(s) AVA',
                        'ONLINE': 'Disciplina(s) On-line',
                        'ONLINE_ESPECIAL': 'Disciplina(s) On-line - Casos Especiais',
                        'OPTATIVA': 'Disciplina Optativa',
                        'ED': 'Estudos Disciplinares (ED)',
                        'PIM': 'Projeto Integrado Multidisciplinar (PIM)'
                    };
                    
                    doc.setFont('Helvetica', 'bold');
                    doc.setFontSize(11);
                    doc.text(taskNames[task] || task, margin, yPos);
                    yPos += lineHeight;
                    
                    doc.setFont('Helvetica', 'normal');
                    doc.setFontSize(10);
                    
                    let details = [];
                    
                    if (task === 'AC') {
                        details = [
                            'Carga horaria exigida: 100 horas.',
                            'A entrega das AC e feita on-line, exclusivamente via Area do Aluno/AC.'
                        ];
                    } else if (task === 'EXT') {
                        details = [
                            'Carga horaria exigida: 210 horas.',
                            'A entrega das Atividades de Extensao e feita on-line, exclusivamente via Area do Aluno/AEX.'
                        ];
                    } else if (task === 'AVA') {
                        const disciplines = getSelectedDisciplines('AVA');
                        if (disciplines.length > 0) details.push('Disciplina(s): ' + disciplines.join(', ') + '.');
                        details.push('Acessar Area do Aluno/AVA/Conteudos Academicos/Minhas Disciplinas.');
                        details.push('Para NP1, responder, salvar e ENVIAR TODOS os questionarios de TODAS as unidades.');
                        if (regimeGrade) {
                            details.push('Para NP2, SUB e EXAME, agendar as provas de cada disciplina no sistema e realiza-las PRESENCIALMENTE no Laboratorio de Informatica.');
                            details.push('O aluno devera realizar o EXAME apenas se a Media Semestral (MS) for inferior a 7,0 (sete).');
                            details.push('NP1: de ' + formatDate(dates.NP1_inicio) + ' a ' + formatDate(dates.NP1_fim) + '.');
                            details.push('NP2: de ' + formatDate(dates.NP2_inicio) + ' a ' + formatDate(dates.NP2_fim) + '.');
                            details.push('SUB: de ' + formatDate(dates.SUB_inicio) + ' a ' + formatDate(dates.SUB_fim) + '.');
                            details.push('EXAME: de ' + formatDate(dates.EXAME_inicio) + ' a ' + formatDate(dates.EXAME_fim) + '.');
                        } else {
                            details.push('A nota dos exercicios realizados sera replicada para NP1 e NP2.');
                            details.push('Para fins de aprovacao, o aluno deve alcanzar uma media (nota) igual ou superior a 5,0 (cinco).');
                        }
                    } else if (task === 'ONLINE') {
                        const disciplines = getSelectedDisciplines('ONLINE');
                        if (disciplines.length > 0) details.push('Disciplina(s): ' + disciplines.join(', ') + '.');
                        if (regimeGrade) {
                            details.push('Atencao a plataforma de ACESSO para responder estas disciplinas, que e DIFERENTE das disciplinas AVA.');
                            details.push('Acessar Area do Aluno/Disciplinas On-line.');
                            details.push('Responder TODOS OS MODULOS DE QUESTOES.');
                            details.push('NP1: de ' + formatDate(dates.NP1_inicio) + ' a ' + formatDate(dates.NP1_fim) + '.');
                            details.push('NP2: de ' + formatDate(dates.NP2_inicio) + ' a ' + formatDate(dates.NP2_fim) + '.');
                        } else {
                            details.push('Atencao a plataforma de ACESSO para responder estas disciplinas.');
                            details.push('Acessar Area do Aluno/Disciplinas On-line.');
                            details.push('Responder TODOS OS MODULOS DE QUESTOES.');
                        }
                    } else if (task === 'ONLINE_ESPECIAL') {
                        const disciplines = getSelectedDisciplines('ONLINE_ESPECIAL');
                        if (disciplines.length > 0) details.push('Disciplina(s): ' + disciplines.join(', ') + '.');
                        details.push('Acessar Area do Aluno/AVA/Conteudos Academicos/Minhas Disciplinas.');
                        details.push('Responder, salvar e ENVIAR TODOS os questionarios de TODAS as unidades.');
                        details.push('A nota dos exercicios realizados sera replicada para NP1 e NP2.');
                    } else if (task === 'OPTATIVA') {
                        const disciplines = getSelectedDisciplines('OPTATIVA');
                        if (disciplines.length > 0) details.push('Disciplina(s): ' + disciplines.join(', ') + '.');
                        details.push('Acessar Area do Aluno/AVA/Conteudos Academicos/Minhas Disciplinas.');
                        details.push('Para NP1, responder, salvar e ENVIAR TODOS os questionarios de TODAS as unidades.');
                    } else if (task === 'ED') {
                        const disciplines = getSelectedDisciplines('ED');
                        if (disciplines.length > 0) details.push('Disciplina(s): ' + disciplines.join(', ') + '.');
                        details.push('Responder TODAS as questoes (35) de cada modulo que estiver em AD/DP.');
                        details.push('Acertar, para fins de aprovacao, pelo menos 10 questoes para cada modulo que estiver em AD/DP.');
                    } else if (task === 'PIM') {
                        const disciplines = getSelectedDisciplines('PIM');
                        if (disciplines.length > 0) details.push('Disciplina(s): ' + disciplines.join(', ') + '.');
                        details.push('Elaborar o trabalho, conforme o Manual anexo.');
                        details.push('O trabalho deve ser DIGITADO conforme as normas da ABNT.');
                        details.push('Apos o termino da redacao, CONVERTER o(s) arquivo(s) para o formato PDF.');
                        details.push('Enviar o conteudo elaborado para: rodrigo.oliveira@docente.unip.br');
                        if (regimeGrade) {
                            details.push('Prazo: ' + formatDate(dates.PIM_prazo) + '.');
                        }
                    }
                    
                    details.forEach(detail => {
                        if (detail.trim()) {
                            const lines = doc.splitTextToSize('‚Ä¢ ' + detail.trim(), pageWidth - 30);
                            lines.forEach(line => {
                                if (yPos > pageHeight - 15) {
                                    doc.addPage();
                                    doc.setFont('Helvetica', 'normal');
                                    doc.setFontSize(10);
                                    yPos = 15;
                                    pageNum++;
                                    doc.text('Pagina ' + pageNum, pageWidth - 30, pageHeight - 10);
                                }
                                doc.text(line, margin, yPos);
                                yPos += lineHeight;
                            });
                        }
                    });
                    yPos += lineHeight;
                });
                
                if (yPos > pageHeight - 20) {
                    doc.addPage();
                    yPos = 15;
                    pageNum++;
                    doc.text('Pagina ' + pageNum, pageWidth - 30, pageHeight - 10);
                }
                
                doc.setFont('Helvetica', 'bold');
                doc.setFontSize(10);
                const attendText = 'Em caso de duvidas, comparecer no ATENDIMENTO DA COORDENACAO, ' + dates.atendimento_info + '.';
                const attendLines = doc.splitTextToSize(attendText, pageWidth - 30);
                attendLines.forEach(line => {
                    if (yPos > pageHeight - 15) {
                        doc.addPage();
                        yPos = 15;
                        pageNum++;
                        doc.text('Pagina ' + pageNum, pageWidth - 30, pageHeight - 10);
                    }
                    doc.text(line, margin, yPos);
                    yPos += lineHeight;
                });
                
                const cleanName = studentName.normalize('NFD').replace(/[\u0300-\u036f]/g, '').replace(/[^a-zA-Z0-9]/g, '_');
                doc.save('DP_' + cleanName + '.pdf');
                showMessage('‚úÖ PDF gerado com sucesso!', 'success');
            } catch (error) {
                showMessage('‚ùå Erro: ' + error.message, 'error');
                console.error(error);
            }
        }
    </script>
</body>
</html>
